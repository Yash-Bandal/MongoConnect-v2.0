<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUDE Operations | MongoDB Atlas</title>
    <!-- Google Fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- <script src="sweetalert2.all.min.js"></script> -->
</head>

<body>
    <div class="container">
        <h1 class="py-3 px-4 rounded text-center shadow">CRUDE Operations | MongoDB Atlas <img src="/images/mongodb.png" alt="Logo"
                style="width: 50px; height: auto;" class="ms-2" ></h1>

        <!-- Dont use /public/images.. -->
        <!-- <h1>CRUDE Operations | MongoDB Atlas <img src="/public/images/mongodb.png" alt="Logo"style="width: 50px; height: auto;"></h1> -->
        <br>
        <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm">
                    <div class="card-header py-3">
                        <h4 class="my-0 fw-normal">Add Note ➕</h4>
                    </div>
                    <div class="form-container">

                        <!-- ========================== Insert Form 1  ========================== -->

                        <!-- Ensure this 'POST' method to send data at backend -->
                        <form method="post" action="/insert">
                            <div class="form-group mb-3 text-start">
                                <label for="Subject" class="form-label fw-semibold">Enter Subject:</label>
                                <input type="text" class="form-control shadow-sm" id="Subject" name="Subject">
                            </div>
                            <!-- Other input fields -->


                            <div class="form-group mb-3 text-start">
                                <label for="UserName" class="form-label fw-semibold">Enter Name:</label>
                                <input type="text" class="form-control shadow-sm" id="UserName" name="UserName">
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="RBT" class="form-label fw-semibold">Enter RBT Number:</label>
                                <input type="number" class="form-control shadow-sm" id="RBT" name="RBT">
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="division" class="form-label fw-semibold">Enter Division:</label>
                                <input type="text" class="form-control shadow-sm" id="division" name="division">
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="mail" class="form-label fw-semibold">Enter Email:</label>
                                <input type="email" class="form-control shadow-sm" id="mail" name="mail" required>
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="content" class="form-label fw-semibold">Any Suggestion:</label>
                                <textarea class="form-control shadow-sm" id="content" name="content" rows="3"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">ADD TO MongoDB</button>
                        </form>

                        <!-- ========================== Insert Form 1 ========================== -->

                    </div>
                </div>
            </div>


            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm">
                    <div class="card-header py-3">
                        <h4 class="my-0 fw-normal">Update Note</h4>
                    </div>
                    <div class="form-container">

                        <!-- ========================== Update Form 2 ========================== -->
                        <form method="post" action="/update">

                            <!-- During update ensure different name of search Key ..RBT and originalRBT -->
                            <div class="form-group mb-3 text-start">
                                <label for="originalRBT" class="form-label fw-semibold">Enter RBT to Update:</label>
                                <input type="number" class="form-control shadow-sm" id="originalRBT" name="originalRBT" required>
                            </div>
                            <!-- Input fields for updated data -->
                            <!-- Other input fields -->

                            <div class="form-group mb-3 text-start">
                                <label for="UserName" class="form-label fw-semibold">Enter Updated Name:</label>
                                <input type="text" class="form-control shadow-sm" id="UserName" name="UserName" required>
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="RBT" class="form-label fw-semibold">Enter Updated RBT:</label>
                                <input type="number" class="form-control shadow-sm" id="RBT" name="RBT" required>
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="division" class="form-label fw-semibold">Enter Updated Division:</label>
                                <input type="text" class="form-control shadow-sm" id="division" name="division" required>
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="mail" class="form-label fw-semibold">Enter Updated Email:</label>
                                <input type="email" class="form-control shadow-sm" id="mail" name="mail" required>
                            </div>
                            <div class="form-group mb-3 text-start">
                                <label for="content" class="form-label fw-semibold">New Suggestion:</label>
                                <textarea class="form-control shadow-sm" id="content" name="content" rows="3"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Update Note</button>
                        </form>
                        <!-- ========================== Update Form 2 ========================== -->

                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm">
                    <div class="card-header py-3">
                        <h4 class="my-0 fw-normal">Delete Note ➖</h4>
                    </div>
                    <div class="form-container">

                        <!-- ========================== Delete Form 3 ========================== -->

                        <!-- without seetalert  -->

                        <!-- <form method="post" action="/delete">
                            <div class="form-group mb-3 text-start">
                                <label for="deleteRBT">Enter RBT to Delete:</label>
                                <input type="number" class="form-control shadow-sm" id="deleteRBT" name="originalRBT" required>
                            </div>
                            <button type="submit" class="btn btn-danger">Delete Note</button>
                        </form> -->


                        <form id="deleteForm" method="POST" action="/delete">
                            <div class="form-group mb-3 text-start">
                                <label for="deleteRBT" class="form-label fw-semibold">Enter RBT to Delete Data:</label>
                                <input type="number" id="deleteRBT" name="deleteRBT" required>
                            </div>
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>

                        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                        <script>
                            const deleteForm = document.getElementById("deleteForm");

                            deleteForm.addEventListener("submit", function (e) {
                                e.preventDefault(); // Stop form from auto-submitting

                                const swalWithBootstrapButtons = Swal.mixin({
                                    customClass: {
                                        confirmButton: "btn btn-success",
                                        cancelButton: "btn btn-danger"
                                    },
                                    buttonsStyling: false
                                });

                                swalWithBootstrapButtons.fire({
                                    title: "Are you sure?",
                                    text: "You won't be able to revert this!",
                                    icon: "warning",
                                    showCancelButton: true,
                                    confirmButtonText: "Yes, delete it!",
                                    cancelButtonText: "No, cancel!",
                                    reverseButtons: true
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        deleteForm.submit(); // Proceed if confirmed
                                    } else if (result.dismiss === Swal.DismissReason.cancel) {
                                        swalWithBootstrapButtons.fire({
                                            title: "Cancelled",
                                            text: "Your data is safe :)",
                                            icon: "error"
                                        });
                                    }
                                });
                            });
                        </script>



                        <!-- ========================== Delete Form 3 ========================== -->

                    </div>
                </div>
            </div>

        </div>
    </div>



    <!-- Partials syntax : getting the retrieval form  -->
    <%- include('partials/getForm'); %>

        <!-- SweetAlert2 CDN -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <% if (typeof retrievalSuccess !=="undefined" ) { %>
            <script>
                Swal.fire({
                    title: "<%= retrievalSuccess ? 'Data Retrieved!' : 'Data Not Found' %>",
                    text: "<%= retrievalSuccess ? 'Your data was successfully fetched.' : 'No data found for the given RBT.' %>",
                    icon: "<%= retrievalSuccess ? 'success' : 'error' %>"
                });
            </script>
            <% } %>



</body>
<footer class="text-center mt-5 text-muted">
     YB-Productions | &copy; 2025 | Version 2.0
</footer>
  
</html>